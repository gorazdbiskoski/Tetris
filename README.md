# Tetris
### Windows Forms Проект од: Кристијан Стојановски, Горазд Бишкоски и Стефан Колов


Играта Тетрис е популарна видео игра со сложувалки во бројни форми на различни платформи. Нашата имплементација користи Windows Forms за да создаде десктоп верзија на оваа класична игра.

### Функционалности:

- Усогласување на фигурите: Играчите мора да ротираат и да наредат разнобојните фигурите што паѓаат за да создадат целосни хоризонтални линии без празнини.
- Следење на резултати: играта го следи резултатот на играчот, кој се зголемува како што се бришат хоризонталните линии.
- Крај на играта: играта завршува кога нема да остане простор за паѓање на нови фигури.

### Како се игра играта:

- Започнете ја играта: стартувајте ја апликацијата за играта Тетрис за да започнете.
- Контрола на фигурите: Користете ги копчињата на тастатурата за да ги преместите и ротирате тетромините што паѓаат.
- Копчиња со стрелки лево и десно: поместете ги паѓачките фигури лево или десно.
- Стрелка нагоре: ротирајте ја фигурата.
- Стрелка надоле: брзо спуштете ја фигурата на дното.
- Хоризонтални линии: Распоредете ги фигурите за да формираат целосни хоризонтални линии. Овие линии ќе исчезнат, а играчот ќе заработи поени.

### Пример Имплементација:

За да обезбедиме референца, нашата игра е моделирана според класичната игра Тетрис достапна на многу платформи. Можете да видите пример на класичната игра тетрис [овде](https://tetris.com/play-tetris).

### Опис на проблемот:
Имплементација на играта Тетрис користи Windows Forms за да создаде графички интерфејс, каде што користиме PictureBox за прикажување на површината за играње и помал PictureBox за прикажување на следната тетромино фигура, а се користат Label контроли за прикажување на резултатот.

#### Класи и нивни улоги

1. Класа "Shape":
- Претставува една тетромино фигура во играта.
- Променливи:
  - Width и Height: ги чуваат димензиите на тетроминото.
  - Dots: дво-димензионална матрица која ја претставува формата на тетроминото.
  - backupDots: матрица за зачувување на оригиналната форма при ротирање.
  - Color: ја чува бојата на тетроминото.
-Методи:
  - turn(): ротирање на тетроминото.
  - rollback(): враќање на тетроминото во претходната состојба при неуспешна ротација.

2. Класа "ShapesHandler":

- Управува со различни тетромино фигури.
- Променливи:
  - shapesArray: низа од различни форми на тетромино.
- Методи:
  - GetRandomShape(): генерира случајна тетромино фигура.

3. Класа "Form1":

- Главната класа за формата на играта која ги управува корисничкиот интерфејс и логиката на играта.
- Променливи:
  - timer: тајмер за контрола на паѓањето на тетромино фигурите.
  - currentShape, nextShape: ја чуваат моменталната и следната тетромино фигура.
  - canvasBitmap, workingBitmap: битмапи за цртање на површината на играње.
  - canvasGraphics, workingGraphics: графички објекти за цртање на битмапите.
  - canvasWidth, canvasHeight: димензии на површината на играње.
  - canvasDots: матрица која ја чува состојбата на површината на играње.
  - dotSize: големина на еден блок во пиксели.
  - spawnX, spawnY: координати за генерирање на нови тетромино фигури.
  - background: боја на позадината.
  - score: резултат на играчот.
  - nextShapeBitmap, nextShapeGraphics: битмапи и графика за прикажување на следната тетромино форма.
- Методи:
  - loadCanvas(): иницијализирање на површината на играње.
  - getRandomShape(), getNextShape(): методи за генерирање на случајна и следна тетромино форма.
  - moveShape(int Down, int Side): преместување на тетромино фигура.
  - drawShape(): цртање на моменталната тетромино фигура на површината.
  - updateCanvas(): ажурирање на површината со моменталната тетромино форма.
  - checkIfGameOver(): проверка дали играта е завршена.
  - Timer_Tick(object sender, EventArgs e): обработка на настани при тајмер тик.
  - Form1_KeyDown(object sender, KeyEventArgs e): обработка на настани при притискање на копчиња.
  - UpdateScore(): ажурирање на резултатот на играчот.

#### Како се чуваат податоците
- Површината за играње е претставена со дво-димензионална матрица "canvasDots" која ги чува блоковите како цели броеви (каде што 0 претставува празно поле, а 1 претставува зафатено поле).
- Тетромино фигурите се чуваат како објекти од класата "Shape", со матрица "Dots" која ја претставува формата на фигурата и променливи за бојата и димензиите.
- Резултатот на играчот се чува како цел број "score" во класата "Form1".

Со оваа организација на податоците и структурите, апликацијата овозможува ефикасна и функционална имплементација на класичната игра Тетрис во Windows Forms.
